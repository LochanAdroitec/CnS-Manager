<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>My Documents</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<body>
<div th:replace="~{common/nav :: nav-bar}"></div>
<br />
<br />
<br />
<div class="container">
    <div class="card">
        <div th:if="${success}" class="alert alert-success">
            <p th:text="${success}"></p>
        </div>
        <div th:if="${error}" class="alert alert-danger">
            <p th:text="${error}"></p>
        </div>

        <div class="card-header">
            <h2 class="text-center">My Documents</h2>
        </div>

        <div class="card-body">
            <a th:href="@{/upload}" class="btn btn-success mb-3">Upload New Document</a>

            <table class="table table-striped table-bordered table-hover">
                <thead class="table-dark">
                <tr>
                    <th>Title</th>
                    <th>Product Code</th>
                    <th>Edition</th>
                    <th>Publish Date</th>
                    <th>Pages</th>
                    <th>Uploaded At</th>
                    <th>Action</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="doc : ${documents}">
                    <td th:text="${doc.title}"></td>
                    <td th:text="${doc.productCode}"></td>
                    <td th:text="${doc.edition != null ? doc.edition : '-'}"></td>
                    <td th:text="${doc.publishDate != null ? doc.publishDate : '-'}"></td>
                    <td th:text="${doc.noOfPages != null ? doc.noOfPages : '-'}"></td>
                    <td th:text="${doc.uploadedAt}"></td>
                    <!-- In your documents list table, Action column -->
                    <td>

                        <a th:href="@{/DocViewer(id=${doc.id})}"
                           class="btn btn-info btn-sm"
                        >
                            View
                        </a>
                        <a th:href="@{/documents/download/{id}(id=${doc.id})}"
                           class="btn btn-success btn-sm">
                            <i class="fas fa-download"></i> Download
                        </a>
<!--                        <a th:href="@{/manager/documents/delete/{id}(id=${doc.id})}"-->
<!--                           class="btn btn-danger btn-sm"-->
<!--                           onclick="return confirm('Are you sure you want to delete this document?');">-->
<!--                            <i class="fas fa-trash"></i> Delete-->
<!--                        </a>-->

<!--                        &lt;!&ndash; View Button &ndash;&gt;-->
<!--                        <a th:href="@{/manager/document/{id}(id=${doc.id})}"-->
<!--                           class="btn btn-info btn-sm"-->
<!--                           title="View"> View-->
<!--                            <i class="fas fa-eye"></i>-->
<!--                        </a>-->

<!--                        &lt;!&ndash; Download Button &ndash;&gt;-->
<!--                        <a th:href="@{/manager/document/download/{id}(id=${doc.id})}"-->
<!--                           class="btn btn-success btn-sm"-->
<!--                           title="Download">-->
<!--                            <i class="fas fa-download"></i> Download-->
<!--                        </a>-->

                        <!-- NEW: Edit Button -->
                        <a th:href="@{/document/edit/{id}(id=${doc.id})}"
                           class="btn btn-warning btn-sm"
                           title="Edit">
                            <i class="fas fa-edit"></i> Edit
                        </a>

                        <!-- Delete Button -->
<!--                        <a th:href="@{/manager/document/delete/{id}(id=${doc.id})}"-->
<!--                           class="btn btn-danger btn-sm"-->
<!--                           onclick="return confirm('Are you sure you want to delete this document?')"-->
<!--                           title="Delete">-->
<!--                            <i class="fas fa-trash"></i> Delete-->
<!--                        </a>-->
                        <a th:href="@{/documents/delete/{id}(id=${doc.id})}"
                           class="btn btn-danger btn-sm"
                           onclick="return confirm('Are you sure you want to delete this document?');">
                            <i class="fas fa-trash"></i> Delete
                        </a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
</body>

</html>