<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>My Bookmarks - Viewer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
<div th:replace="~{common/nav :: nav-bar}"></div>
<br><br><br>

<div class="container">
    <div class="card">
        <div class="card-header bg-info text-white">
            <h2 class="text-center">
                <i class="fas fa-bookmark"></i> My Bookmarks
            </h2>
        </div>

        <div class="card-body">
            <div id="bookmarksList">
                <p class="text-center">Loading bookmarks...</p>
            </div>
        </div>
    </div>
</div>

<script>
    // Fetch and display bookmarks for viewer
    fetch('/ViewerBookmarks')
    .then(response => response.json())
    .then(bookmarks => {
        const container = document.getElementById('bookmarksList');

        if (bookmarks.length === 0) {
            container.innerHTML = '<p class="text-center text-muted">No bookmarks yet</p>';
            return;
        }

        let html = '<div class="list-group">';
        bookmarks.forEach(bookmark => {
            const date = new Date(bookmark.createdAt).toLocaleString();
            html += `
                <a href="/viewer/viewer-page?id=${bookmark.documentId}&page=${bookmark.pageNumber}"
                   class="list-group-item list-group-item-action">
                    <div class="d-flex w-100 justify-content-between">
                        <h5 class="mb-1">
                            <i class="fas fa-bookmark text-warning"></i>
                            ${bookmark.documentTitle}
                        </h5>
                        <small>${date}</small>
                    </div>
                    <p class="mb-1">
                        <strong>${bookmark.bookmarkName}</strong> - Page ${bookmark.pageNumber}
                    </p>
                </a>
            `;
        });
        html += '</div>';

        container.innerHTML = html;
    })
    .catch(error => {
        console.error('Error loading bookmarks:', error);
        document.getElementById('bookmarksList').innerHTML =
            '<p class="text-center text-danger">Failed to load bookmarks</p>';
    });

</script>
</body>
</html>